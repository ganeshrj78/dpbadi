<div class="bg-white rounded-2xl shadow-lg border border-wimbledon-gold/20 overflow-hidden">
    <div class="overflow-x-auto">
        <table class="min-w-full">
            <thead>
                <tr class="bg-gradient-to-r from-wimbledon-cream to-white border-b border-wimbledon-gold/20">
                    <th class="px-6 py-4 text-left text-xs font-bold text-wimbledon-purple uppercase tracking-wider">Player</th>
                    <th class="px-6 py-4 text-left text-xs font-bold text-wimbledon-purple uppercase tracking-wider">Category</th>
                    <th class="px-6 py-4 text-left text-xs font-bold text-wimbledon-purple uppercase tracking-wider">Contact</th>
                    <th class="px-6 py-4 text-right text-xs font-bold text-wimbledon-purple uppercase tracking-wider">Charges</th>
                    <th class="px-6 py-4 text-right text-xs font-bold text-wimbledon-purple uppercase tracking-wider">Paid</th>
                    <th class="px-6 py-4 text-right text-xs font-bold text-wimbledon-purple uppercase tracking-wider">Balance</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-wimbledon-gold/10">
                {% for player in player_list %}
                <tr class="table-row-hover transition-all {% if not player.is_active %}opacity-50{% endif %}" x-data="{ showCategoryMenu: false }">
                    <td class="px-6 py-4 whitespace-nowrap cursor-pointer" onclick="window.location='{{ url_for('player_detail', id=player.id) }}'">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 {% if player.is_active %}gradient-primary{% else %}bg-gray-400{% endif %} rounded-full flex items-center justify-center text-white font-bold shadow-md border border-wimbledon-gold/30">
                                {{ player.name[0].upper() }}
                            </div>
                            <div>
                                <div class="font-semibold {% if player.is_active %}text-gray-800{% else %}text-gray-500{% endif %}">{{ player.name }}</div>
                                <div class="flex gap-1">
                                    {% if player.is_admin %}
                                    <span class="text-xs text-wimbledon-purple font-medium">Admin</span>
                                    {% endif %}
                                    {% if not player.is_active %}
                                    <span class="text-xs text-red-500 font-medium">Inactive</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap relative">
                        <button @click.stop="showCategoryMenu = !showCategoryMenu"
                            class="px-3 py-1.5 inline-flex items-center gap-1 text-xs leading-5 font-bold rounded-full shadow-sm transition-all hover:scale-105
                            {% if player.category == 'regular' %}gradient-success text-white
                            {% elif player.category == 'adhoc' %}gradient-primary text-white
                            {% else %}gradient-gold text-wimbledon-purple-dark{% endif %}">
                            <span>{{ player.category }}</span>
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <!-- Category Dropdown -->
                        <div x-show="showCategoryMenu" @click.away="showCategoryMenu = false" x-cloak
                            class="absolute z-10 mt-1 w-32 bg-white rounded-lg shadow-lg border border-wimbledon-gold/20 py-1">
                            <button onclick="updateCategory({{ player.id }}, 'regular'); return false;"
                                class="w-full px-4 py-2 text-left text-sm hover:bg-wimbledon-cream flex items-center gap-2 {% if player.category == 'regular' %}font-bold text-wimbledon-green{% endif %}">
                                <span class="w-2 h-2 rounded-full bg-wimbledon-green"></span> Regular
                            </button>
                            <button onclick="updateCategory({{ player.id }}, 'adhoc'); return false;"
                                class="w-full px-4 py-2 text-left text-sm hover:bg-wimbledon-cream flex items-center gap-2 {% if player.category == 'adhoc' %}font-bold text-wimbledon-purple{% endif %}">
                                <span class="w-2 h-2 rounded-full bg-wimbledon-purple"></span> Ad-hoc
                            </button>
                            <button onclick="updateCategory({{ player.id }}, 'kid'); return false;"
                                class="w-full px-4 py-2 text-left text-sm hover:bg-wimbledon-cream flex items-center gap-2 {% if player.category == 'kid' %}font-bold text-yellow-600{% endif %}">
                                <span class="w-2 h-2 rounded-full bg-wimbledon-gold"></span> Kid
                            </button>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap cursor-pointer" onclick="window.location='{{ url_for('player_detail', id=player.id) }}'">
                        <div class="text-sm text-gray-600">
                            {% if player.phone %}
                            <div class="flex items-center space-x-1">
                                <svg class="w-4 h-4 text-wimbledon-purple/40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                <span>{{ player.phone }}</span>
                            </div>
                            {% endif %}
                            {% if player.email %}
                            <div class="flex items-center space-x-1 mt-1">
                                <svg class="w-4 h-4 text-wimbledon-purple/40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                                <span>{{ player.email }}</span>
                            </div>
                            {% endif %}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right font-medium cursor-pointer" onclick="window.location='{{ url_for('player_detail', id=player.id) }}'">
                        ${{ "%.2f"|format(player.get_total_charges()) }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wimbledon-green text-right font-semibold cursor-pointer" onclick="window.location='{{ url_for('player_detail', id=player.id) }}'">
                        ${{ "%.2f"|format(player.get_total_payments()) }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right cursor-pointer" onclick="window.location='{{ url_for('player_detail', id=player.id) }}'">
                        <span class="px-3 py-1.5 rounded-full text-sm font-bold
                            {% if player.get_balance() > 0 %}bg-wimbledon-purple/10 text-wimbledon-purple{% else %}bg-wimbledon-green/10 text-wimbledon-green{% endif %}">
                            ${{ "%.2f"|format(player.get_balance()) }}
                        </span>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6" class="px-6 py-12 text-center">
                        <svg class="w-16 h-16 mx-auto text-wimbledon-purple/20 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <p class="text-gray-500 font-medium">No players found</p>
                        <p class="text-gray-400 text-sm mt-1">Try adjusting your search or filter</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
